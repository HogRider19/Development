Образ (`Image`) представляет доступный только для чтения шаблон с инструкциями по созданию контейнера. Часто образ представляет собой модификацию другого образа. Образ хранит в себе всё необходимое для приложения, помещенного в контейнер: код, среду выполнения, библиотеки, переменные окружения и конфигурационные файлы.

Можно создавать свои образы или использовать образы, опубликованные в реестре. Для создания образа используется `Dockerfile`, содержащий инструкции по созданию образа и его запуску). Ряд инструкций в `Dockerfile` приводит к созданию в образе нового слоя. При изменении `Dockerfile` и повторной сборке образа пересобираются только модифицированные слои. Это делает образы легковесными и быстрыми.

![[{99844973-4A01-48DA-B668-E6A92A2EEF77}.png]]

**==Build==**. Команда `docker buld` создает образ на основе `DockerFile`, путь к которому передаётся в виде последнего аргумента. При запуске сборки сборщик извлекает базовый образ, если это необходимо, а затем выполняет инструкции.

Для того чтобы дать тэг образу, используется флаг `-t` или `--tag`. Имя может быть произвольным, но существует стандартные правила: `[HOST[:PORT_NUMBER]/]PATH[:TAG]`.

Необязательное имя хоста реестра, где расположен образ указывается как `HOST`.
Если хост не указан, `docker.io` по умолчанию используется публичный реестр `Docker`.
Также, если указан хост, то может указываться номер порта реестра `PORT_NUMBER`.
Путь к образу указывается в `PATH`, для `DockerHub` `[username/]repository`.
Идентификатор версии записывается как `TAG`, по умолчанию `latest`.

```sh
docker build --tag my-username/my-image <dir_path_or_dot>
docker built -f <docker_file_path> <dir_path_or_dot>
```

**==Images==**. По умолчанию команда будет показывать все образы верхнего уровня, их репозитории, теги, а также их размер. Образы `Docker` имеют промежуточные слои, которые повышают возможности повторного использования, команда `docker build` создает слои на на этапе сборки. Эти слои не отображаются по умолчанию.

Команда принимает необязательный `[REPOSITORY[:TAG]]`аргумент, который ограничивает список изображениями. Если указать репозиторий без тэга,
команда выведет список всех изображений в указанном репозитории.

```sh
docker images <name>    // Все образы определенного репозитория
docker images -all [-a] // Показывает все слои, включая промежуточные
```

**==Inspect==**.  Команда предоставляет подробную информацию о конструкциях, контролируемых `Docker`. По умолчанию результаты отображаются в `JSON`.

Команда `docker inspect`сопоставляет любой тип объекта либо по идентификатору, либо по имени. В некоторых случаях существуют несколько типов с одним и тем же именем. Для явного указания типа объекта идентификатора используется `--type`.

```sh
docker inspect --size <name_id> // Дополнительные подля с размером
docker inspect --type [image, volume...] <name_id>
```

**==Rmi==**. Удаляет одно или несколько изображений с узла хоста. Если образ имеет несколько тегов, то эта команда с тегом в качестве параметра удаляет только тег. 
Если тег является единственным для изображения, удаляются и изображение, и тег.
Нельзя  удалить образ работающего контейнера без использования `-f` опции.

```sh
docker rmi <name>:<tag>
docker rmi --force <name>:<tag>
```
