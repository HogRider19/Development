–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º –º–µ—Å—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∏–º –≤ –±—É–¥—É—â–µ–º. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.

---

–û–ø—Ä–µ–¥–µ–ª—è—é—Ç –¥–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, —ç—Ç–æ **Pre-caching** –∏ **On-demand caching**.

**==Pre-caching==**. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ. –î–∞–Ω–Ω—ã–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ó–∞—Ç–µ–º –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ—Ä–µ—Ç –ø–æ–¥–æ–±–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö.

–ú–∏–Ω—É—Å –ø–æ–¥–æ–±–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–∞–Ω–Ω—ã—Ö –≤ —Å–ª—É—á–∞–µ –∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤/—Ä–∞–∑–Ω—ã–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏.

**==On-demand caching==**. –ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∫—ç—à, –µ—Å–ª–∏ –∫—ç—à–µ –Ω–∞–π–¥–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ, —Ç–æ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, —Ç–æ –æ–Ω–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫—ç—à–∏—Ä—É—é—Ç. –ú–∏–Ω—É—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–µ–ª–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö.

---

–°–∞–º—ã–º –ø—Ä–æ—Å—Ç—ã–º —Å–ø–æ—Å–æ–±–æ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ ASP.NET Core –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞¬†`Microsoft.Extensions.Caching.Memory.IMemoryCache`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. `IMemoryCache` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã —Å—Ö–æ–∂–∏–µ —Å –æ–±—ã—á–Ω—ã–º —Å–ª–æ–≤–∞—Ä–µ–º.

`MemoryCache` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `IMemoryCache`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞ `IMemoryCache` –∏ –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –∫—ç—à–∞ –≤ –≤–∏–¥–µ —Å–ª–æ–≤–∞—Ä—è `Dictionary` –≤ –ø–∞–º—è—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞.

–î–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥—ã–Ω–Ω—ã—Ö —Ç–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ `AddMemoryCache` –æ–±—ä–µ–∫—Ç–∞ `ServiceCollection`. –ó–∞—Ç–µ–º –≤–Ω–µ–¥—Ä–∏—Ç—å —Å–µ—Ä–≤–∏—Å `IMemoryCache` –≤ —Ç—Ä–µ–±—É–µ–º—ã–π –∫–ª–∞—Å—Å –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

–ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ–±—ä–µ–∫—Ç–∞ –≤ –∫—ç—à–µ, –µ–º—É –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç `MemoryCacheEntryOptions`. –î–∞–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤—Ä–µ–º—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `callback` –ø—Ä–∏ –∏—Ö —É–¥–∞–ª–µ–Ω–∏–∏.

```c# 
using Microsoft.Extensions.Caching.Memory;
 
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddMemoryCache();

var app = builder.Build();
app.Run();
```

---

–û–¥–Ω—É –∏–∑ —Ñ–æ—Ä–º —Ñ–æ—Ä–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫—ç—à - —ç—Ç–æ –∫—ç—à, –æ–±—â–∏–π –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. 

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫—ç—à –æ–±–ª–∞–¥–∞–µ—Ç —Ç–∞–∫–∏–º–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏, –∫–∞–∫ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –µ–≥–æ –∑–∞–ø—É—Å–∫–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–º—è—Ç—å. 

–í —Å–∏—Å—Ç–µ–º–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –∫—ç—à –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º¬†`IDistributedCache`. –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º —ç—Ç–æ—Ç —Ç–∏–ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä—è–¥ –º–µ—Ç–æ–¥–æ–≤ —Å—Ö–æ–∂–∏—Ö —Å —Å–ª–æ–≤–∞—Ä—ë–º.

–û–±—ä–µ–∫—Ç—ã `IDistributedCache` –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ –±–∞–π—Ç –∏–ª–∏ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏, –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±—É—é—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º. 

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞—á–∞—Å—Ç—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç `Redis`. –°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç –ø–∞–∫–µ—Ç –¥–ª—è —É–¥–æ–±–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å `Redis` –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. 

**Microsoft.Extensions.Caching.StackExchangeRedis** - –ø–∞–∫–µ—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `Redis` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö. 

---

–ö–æ–º–ø—Ä–µ—Å—Å–∏—è –∏–ª–∏ —Å–∂–∞—Ç–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ–¥–∏–Ω –∏–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç —É–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –∫–ª–∏–µ–Ω—Ç—É –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Å–∞–º–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

–î–ª—è –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –æ—Ç–≤–µ—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö ASP.NET Core –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏–±–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞: `Dynamic Compression module` –≤ `IIS`,  `mod_deflate` –≤ `Apache` –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –≤ `Nginx`.

–û–¥–Ω–∞–∫–æ —ç—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ –≤—Å–µ–≥–¥–∞ –±—ã–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø–Ω—ã, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é —Ö–æ—Å—Ç–∏—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö —Ç–∞–∫–∏—Ö –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–≤ –∫–∞–∫ `HTTP.sys` –∏–ª–∏ `Kestrel`. –ò –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º middleware.

**Microsoft.AspNetCore.ResponseCompression** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç middleware –¥–ª—è —Å–∂–∞—Ç–∏—è –æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. 

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–∂–∞—Ç–∏—è –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å —Å–∂–∞—Ç–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `AddResponseCompression` –æ–±—ä–µ–∫—Ç–∞ `IServiceCollection`, –ø–µ—Ä–µ–¥–æ–≤–∞—è –¥–µ–ª–µ–≥–∞—Ç —Å –æ–ø—Ü–∏—è–º–∏. –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∞–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–∑–æ–≤–æ–º `app.UseResponseCompression()`.

–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–∞ —Å–∂–∞—Ç–∏—è –æ—Ç–≤–µ—Ç–∞, —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å–∂–∞—Ç–∏—è, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã `Brotli` –∏ `gzip`.

–°–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTPS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á–µ–Ω–æ —Å–∂–∞—Ç–∏–µ, –ø–æ—ç—Ç–æ–º—É –≤ –≤—ã–∑–æ–≤–µ –¥–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å–∂–∞—Ç–∏–µ –∏ –¥–ª—è HTTPS.

```c#
var builder = WebApplication.CreateBuilder(args);
builder.Services.AddResponseCompression(options => options.EnableForHttps = true);
var app = builder.Build();
 
app.UseResponseCompression(); // –ü–æ–¥–∫–ª—é—á–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∂–∞—Ç–∏—è –æ—Ç–≤–µ—Ç–∞
app.Run();
```

–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏—é –º–æ–≥—É—Ç –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç—å –≤—ã–≥–æ–¥—É –æ—Ç —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö. –ü–æ—ç—Ç–æ–º—É, –¥–ª—è –æ–±—ä–µ–º–æ–≤ –º–µ–Ω—å—à–µ 1 –∫–± –Ω–µ –æ—á–µ–Ω—å —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞–¥–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `MIME-—Ç–∏–ø` –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫, `MVC` –∏–ª–∏ `Razor Pages`. –û–¥–Ω–∞–∫–æ –Ω–µ –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∫–æ–Ω–≤–µ–π–µ—Ä–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Ç–æ–¥¬†`Run` —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ.

–ö–æ–º–ø—Ä–µ—Å—Å–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –≤–æ–∫—Ä—É–≥ –¥–≤—É—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤. –í–Ω–∞—á–∞–ª–µ –∫–ª–∏–µ–Ω—Ç –ø–æ—Å—ã–ª–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫¬†`Accept-Encoding`, –≥–¥–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Å–∂–∞—Ç–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç.

–°–µ—Ä–≤–µ—Ä, –ø–æ–ª—É—á–∏–≤ –∑–∞–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–∂–∞—Ç–∏—è –∏ –∑–∞—Ç–µ–º –ø–æ—Å—ã–ª–∞–µ—Ç –≤–º–µ—Å—Ç–µ —Å –æ—Ç–≤–µ—Ç–æ–º –∫–ª–∏–µ–Ω—Ç—É –∑–∞–≥–æ–ª–æ–≤–æ–∫¬†`–°ontent-Encoding`, –≤ –∫–æ—Ç–æ—Ä–æ–º —É–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∂–∞—Ç–∏—è. –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∂–∞—Ç–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç `Brotli`, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç, –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∂–∞—Ç–∏–µ `gzip`.

---

–ö—Ä–æ–º–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

–î–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –∏—Ö –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–ª–µ–¥—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏. –î–ª—è —ç—Ç–æ–≥–æ `StaticFilesMiddleware` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç `StaticFileOptions`, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–≤–æ–π—Å—Ç–≤–æ¬†`OnPrepareResponse`:

```c#
app.UseStaticFiles(new StaticFileOptions()
{
    OnPrepareResponse = ctx =>
    {
	    ctx.Context.Response.Headers.Add("Cache-Control", "public,max-age=600");
	}
});
```

–°–≤–æ–π—Å—Ç–≤–æ `OnPrepareResponse` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ–ª–µ–≥–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç¬†`StaticFileResponseContext`. –ß–µ—Ä–µ–∑ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø–æ—Å—ã–ª–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏.

–í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Cache-Control`, –∫–æ—Ç–æ—Ä—ã–π  –∑–∞–¥–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. –¢–∞–∫, –∑–Ω–∞—á–µ–Ω–∏–µ `public` —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Ñ–∞–π–ª –±—É–¥–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –≤ –∫—ç—à–µ –±—Ä–∞—É–∑–µ—Ä–∞, —Ç–∞–∫ –∏ –Ω–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞—Ö.

–£ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –µ—Å—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫: –µ—Å–ª–∏ –º—ã –∏–∑–º–µ–Ω–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–∞–π–ª–∞, —Ç–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –±—Ä–∞—É–∑–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∫—ç—à–∞.

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º —Ñ–∞–π–ª–∞–º –≤–µ—Ä—Å–∏—é –∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –º–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏—é —Ñ–∞–π–ª–∞:

```html
<link rel="stylesheet" href="/css/site.css?v=123" />
<script src="app.js?v=123"></script>
```

---

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Å–µ—Ä–≤–∏—Å¬†`IOutputCacheStore`¬†–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç¬†middleware `OutputCacheMiddleware`. 

–î–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–≤–∞ —à–∞–≥–∞. –ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ, –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞¬†`AddOutputCache()`.  –í–æ-–≤—Ç–æ—Ä—ã—Ö, –Ω–∞–¥–æ –¥–æ–±–∏—Ç—å –≤ –∫–æ–Ω–≤–µ–π–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è middleware¬†`OutputCacheMiddleware`¬†—Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è¬†`UseOutputCache()`. 

–î–∞–ª–µ–µ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞, —É –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –ø–æ —Ü–µ–ø–æ—á–∫–µ –º–µ—Ç–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `CacheOutput()`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—ç—à–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç. –õ–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç `CacheOutputAttribute` –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏:

```c#

var builder = WebApplication.CreateBuilder(args);
builder.Services.AddOutputCache();  // –¥–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–∏—Å—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
 
var app = builder.Build();
app.UseOutputCache();  // –¥–æ–±–∞–≤–ª—è–µ–º OutputCacheMiddleware
 
app.MapGet("/", [CacheOutput]() => {});   // –ø—Ä–∏–º–µ–Ω—è–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
app.Run();
```

[[AspNetCore/üü°Base|üü°Base]]
