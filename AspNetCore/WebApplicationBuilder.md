Для создания объекта класса `WebApplication` необходим  `WebApplicationBuilder`. Он создается через статический метод `CreateBuilder` приложения. В качестве параметра
в метод передаются аргументы командной строки приложения через параметр `args`.

Класс `WebApplicationBuilder` объединяет в себе конфигурацию хоста `IHostBuilder` для настройки самого приложения и хоста веб сервера `IWebHostBuilder`.  Он упрощает процесс настройки приложения, позволяя сконцентрироваться на компонентном подходе настройки.

**==Configuration==**. Представляет собой свойство с общим набором настроек приложения. С его помощью можно добавлять пользовательские провайдеры конфигурации, переопределять параметры или считывать необходимую информацию во время выполнения программы.

```c#

```

    
- **Добавление и настройка сервисов**  
    Коллекция `builder.Services` представляет `IServiceCollection`, через которую регистрируются все зависимости приложения: от пользовательских репозиториев до встроенных компонентов ASP.NET Core, таких как MVC, Razor Pages или SignalR. Регистрация выполняется стандартными методами `AddSingleton`, `AddScoped` и `AddTransient`. Благодаря централизованному подходу все сервисы собираются на этапе билдинга, после чего вызывается `builder.Build()` для формирования итогового контейнера зависимостей, используемого при запуске приложения.
    
- **Настройка логирования**  
    Через `builder.Logging` доступен объект `ILoggingBuilder`, отвечающий за настройку источников и уровней логирования. В минимальном хосте по умолчанию подключены консоль и отладочный провайдеры. Метод `builder.Logging.ClearProviders()` позволяет сбросить стандартные провайдеры, а `builder.Logging.AddConsole()` или `AddDebug()` — добавить требуемые. Для более сложных сценариев можно настроить уровень логирования (`SetMinimumLevel`) или подключить сторонние фреймворки (например, Serilog или NLog) через расширения.
    
- **Установка окружения приложения**  
    Свойство `builder.Environment` предоставляет `IHostEnvironment`, где доступно имя текущего окружения (`EnvironmentName`), путь к корню содержимого (`ContentRootPath`) и к веб-корню (`WebRootPath`). По умолчанию окружение определяется через переменную среды `ASPNETCORE_ENVIRONMENT`. Задав `builder.Environment.EnvironmentName = "Staging"`, можно программно изменить среду, после чего условные блоки `if (builder.Environment.IsDevelopment())` будут выполняться в соответствии с новым именем.
    
- **Конфигурация IHostBuilder и IWebHostBuilder**  
    Помимо высокоуровневых свойств, `WebApplicationBuilder` позволяет тонко настраивать базовые билдеры. Через `builder.Host` (тип `IHostBuilder`) можно добавлять фоновые сервисы, конфигурировать настройки хоста, подключать health checks и т. д. Похожим образом `builder.WebHost` (тип `IWebHostBuilder`) даёт доступ к настройкам веб-сервера: конфигурации Kestrel (`ConfigureKestrel`), указанию URL-адресов (`UseUrls`), интеграции с IIS (`UseIISIntegration`) и прочее. Такой двойной подход сохраняет расширяемость классической модели хостинга.
    
- **Построение и запуск приложения**  
    После полной настройки всех подсистем необходимо вызвать `var app = builder.Build();`. Этот вызов формирует объект `WebApplication`, где на этапе построения проверяются все зависимости, конфигурации middleware и подключаются сервисы. Далее конфигурируется конвейер запросов (через `app.UseRouting()`, `app.MapControllers()` и т. д.) и выполняется `app.Run()`, запускающая цикл обработки входящих HTTP-запросов.


```c# 
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.Run();
```

Для конфигурирования приложения в экземпляре объекта `WebApplicationBuilder` определяются следующие свойства:

**Configuration** - применяется для добавления конфигурации к приложению.
**Environment** - предоставляет информацию об окружении приложения.
**Host** - объект IHostBuilder, который применяется для настройки хоста.
**Logging** - позволяет определить настройки логгирования в приложении.
**Services** - представляет коллекцию сервисов и позволяет регистрировать сервисы.
**WebHost** - объект IWebHostBuilder, который позволяет настроить параметры сервера.