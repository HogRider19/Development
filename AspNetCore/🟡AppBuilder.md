Для создания объекта класса `WebApplication` необходим  `WebApplicationBuilder`. Он создается через статический метод `CreateBuilder` приложения. В качестве параметра
в метод передаются аргументы командной строки приложения через параметр `args`.

Класс `WebApplicationBuilder` объединяет в себе конфигурацию хоста `IHostBuilder` для настройки самого приложения и хоста веб сервера `IWebHostBuilder`.  Он упрощает процесс настройки приложения, позволяя сконцентрироваться на компонентном подходе настройки.

```c# 
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.Run();
```

---

**==Configuration==**. Представляет собой свойство с общим набором настроек приложения. С его помощью можно добавлять пользовательские провайдеры конфигурации, переопределять параметры или считывать необходимую информацию во время выполнения программы.

**==Services==**.  Свойство `builder.Services` представляет `IServiceCollection`, через которую регистрируются все зависимости приложения: от пользовательских репозиториев до встроенных компонентов `MVC`, `RazorPages` или `SignalR`. Регистрация выполняется стандартными методами `AddSingleton`, `AddScoped` и `AddTransient`. Все сервисы в последующем будут доступны в приложении через внедрение зависимостей `DI`.

**==Logging==.** Свойство `builder.Logging`, отвечающий за настройку источников и уровней логирования. В минимальном хосте по умолчанию подключены консоль и отладочный провайдеры. Для более сложных сценариев можно настроить уровень логирования или подключить сторонние фреймворки например, `Serilog` или `NLog` через расширения.

**==Environment==**. Свойство `builder.Environment` предоставляет `IHostEnvironment`, где доступно имя текущего окружения, путь к корню содержимого и к веб-корню. По умолчанию окружение определяется через переменную `ASPNETCORE_ENVIRONMENT`.

Свойство `ApplicationName` хранит имя приложения, как правило, это имя основного исполняемого файла или проекта. Это имя может быть использовано для логирования, настройки или для идентификации приложения в распределенных системах. 

```c#
builder.Environment.ApplicationName = "MyWebApp";
```

Свойство `EnvironmentName` содержит строку с типом запуска приложения. По умолчанию оно устанавливается через переменную окружения `ASPNETCORE_ENVIRONMENT`. Чаще всего используются значения вроде `Development`, `Staging`, `Production` для рабочего окружения. В зависимости от значения этого свойства можно включать или отключать различные части функциональности, например, подробную обработку ошибок или использование сервисов.

```c#
app.Environment.EnvironmentName = "SomeEnvName";

bool val = IsEnvironment("SomeEnvName"); //SomeEnvName
bool val = IsDevelopment()               // Development
bool val = IsStaging()                   // Staging
bool val = IsProduction()                // Production
```

Свойство `ContentRootPath` указывает на абсолютный путь к корневой папке приложения. Это основная рабочая директория, относительно которой приложение ищет свои файлы: конфигурации, `Razor` страницы, пользовательские данные и другое. По умолчанию, 
сюда присваивается путь до директории, из которой было запущено приложение.

```c#
builder.Environment.ContentRootPath = "/app";
var rootPath = builder.Environment.ContentRootPath;
```

Свойство `WebRootPath` хранит путь к папке, в которой располагаются статические файлы приложения, такие как изображения, `CSS` и` JavaScript`. Обычно это папка `wwwroot`, но
её можно изменить в конфигурации. Именно из этой директории сервер автоматически обслуживает статический контент без необходимости писать специальный код.

```c#
builder.Environment.WebRootPath = "wwwroot";
var webRoot = builder.Environment.WebRootPath;
```

Свойство `ContentRootFileProvider` возвращает специальный объект, который реализует интерфейс `IFileProvider` и предоставляет абстракцию для работы с файлами в папке `ContentRootPath`. С помощью этого объекта можно получать информацию о файлах, открывать потоки для чтения и отслеживать изменения в файловой системе без жесткой привязки к физическим путям. Это полезно, для чтения конфигурационных файлов.

```c#
var provider = builder.Environment.ContentRootFileProvider;
var fileInfo = provider.GetFileInfo("appsettings.json");
```

Свойство `WebRootFileProvider` аналогично предыдущему, но предназначено для работы с файлами в папке `WebRootPath`, то есть со статическим контентом. С его помощью можно получить доступ к изображениям, скриптам и стилям, а также отслеживать их изменения.

```c#
var provider = builder.Environment.WebRootFileProvider;
var fileInfo = provider.GetFileInfo("images/logo.png");
```

**==Host==**. Отвечает за глобальные параметры работы приложения хоста. Тут задаются источники конфигурации хоста: порядок и приоритет источников конфигурации настройки, политика создания и настройки контейнера внедрения зависимостей, валидация сервисов, выбор фабрики провайдера, а также параметры жизненного цикла хоста: как приложение слушает сигналы остановки и управляет фоновыми службами, очередями задач и планировщиками.

**==WebHost==**. Фокусируется на веб аспектах хоста. Тут задаются параметры: какой `HTTP` сервер используется и с какими ограничениями, на каких адресах и портах он принимает трафик,
где располагаются контентная и статическая части приложения, каким образом настроено шифрование  и проксирование, а также глобальные фильтры и `middleware` конвейер.