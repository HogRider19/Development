ASP.NET Core представляет технологию для создания веб-приложений на платформе DotNet, развиваемую компанией Microsoft. В качестве языков программирования для разработки приложений на ASP.NET Core используются C# и F#.

История ASP.NET фактически началась с выходом первой версии .NET в начале 2002 года и с тех пор ASP.NET и .NET развивались параллельно: выход новой версии .NET знаменовал выход новой версии ASP.NET, поскольку ASP.NET работает поверх .NET.

В то же время изначально ASP.NET была нацелена на работу исключительно в Windows на веб-сервере IIS. Хотя благодаря Mono приложения можно было запускать и на Linux.

Однако 2014 год ознаменовал большие перемены, фактически революцию в развитии платформы. Microsoft взяла курс на развитии ASP.NET как кроссплатформенной технологии, которая развивается как opensource-проект. 

Платформа получила название ASP.NET Core. Первый релиз обновленной платформы увидел свет в 2016. Теперь она стала работать на Windows, MacOS и Linux. Она стала более легковесной, модульной, ее стало проще конфигурировать.

![[Pasted image 20231208225523.png]]

На самом верхнем уровне располагаются различные модели взаимодействия с пользователем. Это технологии построения пользовательского интерфейса и обработки ввода пользователя. Кроме того присутствуют встроенные сервисы.

Все эти технологии базируются и взаимодействуют с чистым ASP.NET Core, который представлен прежде всего различными встроенными компонентами middleware - компонентами, которые применяются для обработки запроса.

Кроме того, технологии высшего уровня также взаимодействуют с различными расширениями, которые не являются непосредственной частью ASP.NET Core, как расширения для логгирования, конфигурации и так далее.

И на самом нижнем уровне приложение ASP.NET Core работает в рамках некоторого веб-сервера, например, `Kestrel`, `IIS` или библиотеки` HTTP.sys`.

---

Приложение представляет объект `AspNetCore.Builder.WebApplication`. Этот объект настраивает всю конфигурацию приложения, его маршруты, зависимости и т.д.

Для создания объекта `WebApplication` необходим специальный класс-строитель `WebApplicationBuilder`. Он создается через статический метод `CreateBuilder` приложения. В качестве параметра в метод передаются аргументы, которые передаются приложению при запуске в виде ключевого слова `args`.

`WebApplicationBuilder` используется для: Установки конфигурации приложения,
Добавления сервисов Настройка логгирования в приложении, Установки окружения приложения, Конфигурации объектов` IHostBuilder` и `IWebHostBuilder`.

**WebApplicationBuilder** - класс для настройки и создания приложения.
**WebApplication.CreateBuilder()** - создание объекта WebApplicationBuilder.

```c# 
var builder = WebApplication.CreateBuilder(args);
var app = builder.Build();
app.Run();
```

Для конфигурирования приложения в экземпляре объекта `WebApplicationBuilder` определяются следующие свойства:

**Configuration** - применяется для добавления конфигурации к приложению.
**Environment** - предоставляет информацию об окружении приложения.
**Host** - объект IHostBuilder, который применяется для настройки хоста.
**Logging** - позволяет определить настройки логгирования в приложении.
**Services** - представляет коллекцию сервисов и позволяет регистрировать сервисы.
**WebHost** - объект IWebHostBuilder, который позволяет настроить параметры сервера.

---

**WebApplication** - класс представляющий серверное приложение.
**WebApplicationBuilder.Build()** - создание объекта WebApplication,

Класс `WebApplication` применяется для управления обработкой запроса, установки маршрутов, получения сервисов. Класс `WebApplication` применяет три интерфейса:

**IHost** - применяется для запуска и остановки хоста, слушающего входящие запросы.
**IApplicationBuilder** - применяется для установки компонентов обработки запроса.
**IEndpointRouteBuilder** - применяется для установки сопоставленных маршрутов.

Для получения доступа к функциональности приложения можно использовать следующие свойства класса `WebApplication`:

**Configuration** - представляет конфигурацию приложения в виде объекта IConfiguration.
**Environment** - представляет окружение приложения в виде `IWebHostEnvironment`.
**Lifetime** - позволяет получать уведомления о событиях жизненного цикла приложения.
**Logger** - представляет логгер приложения по умолчанию.
**Services** - представляет зарегистрированные сервисы приложения.
**Urls** - представляет набор адресов, которые использует сервер.

Для управления хостом класс `WebApplication` определяет следующие методы:

**Run()/Start()** - запускает приложение, блокируя поток выполнения.
**RunAsync()/StartAsync()** - запускает приложение в асинхронном режиме.
**StopAsync()** - останавливает выполнение приложение с возвратом управления.