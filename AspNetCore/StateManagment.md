## Items

**HttpContext.Items** - объект типа IDictionary. Эта коллекция предназначена для таких данных, которые непосредственно связаны с текущим запросом. После завершения запроса все данные из HttpContext.Items удаляются. Каждый объект в этой коллекции имеет ключ и значение. И с помощью ключей можно управлять объектами коллекции

В каком случае мы можем применить данную коллекцию? Например, если у нас обработка запроса вовлекает множество компонентов middleware, и мы хотим, чтобы для этих компонентов были доступны общие данные, то как раз можем применить эту коллекцию

---

## Cookie

**Request.Cookies** - коллекция IReqCookieCollection для получения куки
**Response.Cookies** - коллекция IIResponseCookies для установки куки

Куки представляют самый простой способ сохранить данные пользователя. Куки хранятся на компьютере пользователя и могут устанавливаться как на сервере, так и на клиенте. Так как куки посылаются с каждым запросом на сервер, то их максимальный размер ограничен 4096 байтами.

Для работы с куками также можно использовать контекст запроса HttpContext, который передается в качестве параметра в компоненты middleware, а также доступен в контроллерах и RazorPages.

Чтобы получить куки, которые приходят вместе с запросом к приложению, нам надо использовать коллекцию Request.Cookies объекта HttpContext. Эта коллекция представляет объект IRequestCookieCollection, в котором каждый элемент - это объект KeyValuePair, то есть некоторую пару ключ-значение

---

## Sessions

Сессия представляет собой ряд последовательных запросов, совершенных в одном браузере в течение некоторого времени.

Для хранения состояния сессии на сервере создается словарь или хеш-таблица, которая хранится в кэше и которая существует для всех запросов из одного браузера в течение некоторого времени. На клиенте хранится идентификатор сессии в куки.

Сервер хранит данные сессии в течение ограниченного промежутка времени после последнего запроса. По умолчанию этот промежуток равен 20 минутам, хотя его также можно изменить.

Все сессии работают поверх объекта IDistributedCache, и AspNetCore предоставляет встроенную реализацию IDistributedCache, которую мы можем использовать

**Services.AddDistributedMemoryCache()** - добавление хранилища
**Services.AddSession()** - добавление поддержки сессий
**app.UseSession()** - добавление middleware для работы с сессиями

**HttpContext.Session** - объект ISession для работы с сессиями

## Методы ISession:

1. **Clear():** очищает сессию
2. **Keys:** представляющее список строк со всеми ключами
3. **Get(string key):** получает по ключу key значение в byte[]
4. **GetInt32(string key):** получает по ключу key значение int32
5. **GetString(string key):** получает по ключу key значение string
6. **Set(string key, byte[] value):** устанавливает по ключу key значение,
7. **SetInt32(string key, int value):** устанавливает по ключу значение
8. **SetString(string key, string value):** устанавливает по ключу значение
9. **Remove(string key)**: удаляет значение по ключу