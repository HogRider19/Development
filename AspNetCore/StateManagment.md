
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `AspNetCore` –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –∫–∞–∫–∏–µ-—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫ –∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –∑–∞–ø—Ä–æ—Å—É –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. 
–ò –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∏–¥–∞ –¥–∞–Ω–Ω—ã—Ö, —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–ª—è –∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è.

**==HttpContext.Items==**. –û–¥–∏–Ω –∏–∑ –ø—Ä–æ—Å—Ç–µ–π—à–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞¬†`IDictionary<object, object>`. –≠—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ç–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ç–µ–∫—É—â–∏–º –∑–∞–ø—Ä–æ—Å–æ–º. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ–µ —É–¥–∞–ª—è—é—Ç—Å—è. 

–≠—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤–æ–≤–ª–µ–∫–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ `middleware`, –∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –¥–ª—è —ç—Ç–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±—ã–ª–∏ –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ.

```c#
app.Use(async (context, next) =>
{
    context.Items["text"] = "Hello from HttpContext.Items";
    await next.Invoke();
});
 
app.Run(async (context) => 
{
	await context.Response.WriteAsync($"Text: {context.Items["text"]}")
});
```

**==Cookies==**. –ö—É–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö—É–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.  –î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω `4096` –±–∞–π—Ç–∞–º–∏.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—É–∫–∞–º–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ `HttpContext`. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–º–µ—Å—Ç–µ —Å –∑–∞–ø—Ä–æ—Å–æ–º, –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é¬†`Request.Cookies` –æ–±—ä–µ–∫—Ç–∞ `HttpContext`. –≠—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç¬†`IRequestCookieCollection`, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ–±—ä–µ–∫—Ç–æ–º —Ç–∏–ø–∞¬†`KeyValuePair<string, string>`.

```c#
app.Use(async (context, next) => 
{
	if (context.Request.Cookies.ContainsKey("myCookies"))
	    string name = context.Request.Cookies["myCookies"];
	    
	if (context.Request.Cookies.TryGetValue("myCookies", out string cookies))
	{
		await context.Response.WriteAsync($"Text: {cookies");
	}
	else
	{
		await context.Response.WriteAsync($"Hello, world!");
	}
});
```







---
---
---

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫ –∫–∞–∫–∏–µ-—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫ –∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –∑–∞–ø—Ä–æ—Å—É –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ò –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∏–¥–∞ –¥–∞–Ω–Ω—ã—Ö, —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –¥–ª—è –∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏—è.

---

**==HttpContext.Items==**. –û–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `IDictionary<object, object>`. –≠—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ç–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–≤—è–∑–∞–Ω—ã —Å —Ç–µ–∫—É—â–∏–º –∑–∞–ø—Ä–æ—Å–æ–º. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `HttpContext.Items` —É–¥–∞–ª—è—é—Ç—Å—è. 

–≠—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É –Ω–∞—Å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤–æ–≤–ª–µ–∫–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ middleware, –∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –¥–ª—è —ç—Ç–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ, —Ç–æ –∫–∞–∫ —Ä–∞–∑ –º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏—é.

---

**==Cookies==**. –ö—É–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö—É–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –º–æ–≥—É—Ç —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —Ç–∞–∫ –∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ. –ò–∑-–∑–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –≤ 4096 –±–∞–π—Ç.

**Request.Cookies** - –∫–æ–ª–ª–µ–∫—Ü–∏—è IReqestCookieCollection –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É–∫–∏.
**Response.Cookies** - –∫–æ–ª–ª–µ–∫—Ü–∏—è IIResponseCookies –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫—É–∫–∏.

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—É–∫–∞–º–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ `HttpContext`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã middleware.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–º–µ—Å—Ç–µ —Å –∑–∞–ø—Ä–æ—Å–æ–º –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é, –Ω–∞–º –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é `Request.Cookies` –æ–±—ä–µ–∫—Ç–∞ `HttpContext`.

–≠—Ç–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç` IRequestCookieCollection`, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç - —ç—Ç–æ –æ–±—ä–µ–∫—Ç `KeyValuePair<string, string>`, —Ç–æ –µ—Å—Ç—å –ø–∞—Ä—É –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ.

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫—É–∫, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç¬†`Response.Cookies`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†`IResponseCookies`. –≠—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–≤–∞ –º–µ—Ç–æ–¥–∞: `Append(string key, string value)`, `Delete(string key)`.

```c#
app.Run(async (context) =>
{
    if (context.Request.Cookies.ContainsKey("name"))
    {
        string? name = context.Request.Cookies["name"];
        await context.Response.WriteAsync($"Hello {name}!");
    }
    else
    {
        context.Response.Cookies.Append("name", "Tom");
        await context.Response.WriteAsync("Hello World!");
    }
});
```

---

–°–µ—Å—Å–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä—è–¥ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –∏–º–µ–Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å –∏–ª–∏ —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –∫—ç—à–µ –∏ –∫–æ—Ç–æ—Ä–∞—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –æ–¥–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ—Å—Å–∏–∏ –≤ –∫—É–∫–∏.

–≠—Ç–æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º. –°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –Ω—É–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Å—Å–∏–∏. –≠—Ç–∏ –∫—É–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏. –ù–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∫—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —É–∂–µ –¥–ª—è –∏—Å—Ç–µ–∫—à–µ–π —Å–µ—Å—Å–∏–∏, —Ç–æ –¥–ª—è —ç—Ç–∏—Ö –∫—É–∫ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–°–µ—Ä–≤–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ —Ä–∞–≤–µ–Ω 20 –º–∏–Ω—É—Ç–∞–º.

–°–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –Ω–µ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–∞–º–∏. –¢–æ –µ—Å—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ —Å–≤–æ—è —Å–µ—Å—Å–∏—è.

–í—Å–µ —Å–µ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–≤–µ—Ä—Ö –æ–±—ä–µ–∫—Ç–∞ `IDistributedCache`, –∏ AspNetCore –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `IDistributedCache`, –∫–æ—Ç–æ—Ä—É—é –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

**Services.AddDistributedMemoryCache()** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è —Å–µ—Å—Å–∏–∏.
**Services.AddSession()** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–µ—Å—Å–∏–π.
**app.UseSession()** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏.

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `UseSession` –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–¥ –ª—é–±—ã–º –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –∫ —Å–≤–æ–π—Å—Ç–≤—É —Å–µ—Å—Å–∏–∏ –≤ –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `InvalidOperationException`. 

–ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞¬†`app.UseSession()`¬†–º—ã —Å–º–æ–∂–µ–º —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Å—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ¬†`HttpContext.Session`, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞¬†`ISession`.

**HttpContext.Session** - –æ–±—ä–µ–∫—Ç ISession –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Å—Å–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

**Clear()** - –æ—á–∏—â–∞–µ—Ç —Å–µ—Å—Å–∏—é.
**Keys** - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–µ —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ —Å–æ –≤—Å–µ–º–∏ –∫–ª—é—á–∞–º–∏.
**Get(string key)** - –ø–æ–ª—É—á–∞–µ—Ç –ø–æ –∫–ª—é—á—É key –∑–Ω–∞—á–µ–Ω–∏–µ –≤ byte[].
**GetInt32(string key)** - –ø–æ–ª—É—á–∞–µ—Ç –ø–æ –∫–ª—é—á—É key –∑–Ω–∞—á–µ–Ω–∏–µ int32.
**GetString(string key)** - –ø–æ–ª—É—á–∞–µ—Ç –ø–æ –∫–ª—é—á—É key –∑–Ω–∞—á–µ–Ω–∏–µ string.
**Set(string key, byte[] value)** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ –∫–ª—é—á—É key –∑–Ω–∞—á–µ–Ω–∏–µ.
**SetInt32(string key, int value)** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ –∫–ª—é—á—É –∑–Ω–∞—á–µ–Ω–∏–µ.
**SetString(string key, string value)** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ –∫–ª—é—á—É –∑–Ω–∞—á–µ–Ω–∏–µ.
**Remove(string key)** - —É–¥–∞–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É.

–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –¥–ª—è –Ω–∏—Ö —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä. –ö–∞–∂–¥–∞—è —Å–µ—Å—Å–∏—è –∏–º–µ–µ—Ç —Å–≤–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫—É–∫–∞—Ö. –° –Ω–∞–∑–≤–∞–Ω–∏–µ–º `.AspNet.Session`.

–¢–∞–∫–∂–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫—É–∫–∏ –∏–º–µ—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É¬†`CookieHttpOnly=true`, –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞. –ù–æ –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä—è–¥ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Å—Å–∏–∏ —Å –ø–æ–º–æ—â—å—é —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–∞¬†`SessionOptions`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –¥–µ–ª–µ–≥–∞—Ç, –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–π –æ–¥–Ω–æ–π –∏–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫ –º–µ—Ç–æ–¥–∞ `UseSession()`.

–ó–∞—á–∞—Å—Ç—É—é —Å–µ—Å—Å–∏–∏ —Ö—Ä–∞–Ω—è—Ç –ø—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏. –ï—Å–ª–∏ –Ω–∞–¥–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Å–ª–æ–∂–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Ç–æ –µ–≥–æ –Ω–∞–¥–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å, –∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –¥–ª—è —ç—Ç–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –æ–±—ä–µ–∫—Ç–∞ `ISession`.

```c#
var builder = WebApplication.CreateBuilder();
 
builder.Services.AddDistributedMemoryCache(); // –¥–æ–±–∞–≤–ª—è–µ–º IDistributedMemoryCache
builder.Services.AddSession();                // –¥–æ–±–∞–≤–ª—è–µ–º —Å–µ—Ä–≤–∏—Å—ã —Å–µ—Å—Å–∏–∏
 
var app = builder.Build();
 
app.UseSession();                             // –¥–æ–±–∞–≤–ª—è–µ–º middleware –¥–ª—è —Å–µ—Å—Å–∏–π
 
app.Run(async (context) =>
{
    if (context.Session.Keys.Contains("name"))
    {
	    var name = context.Session.GetString("name")};
	    await context.Response.WriteAsync($"Hello {name}!");
    }
    else
    {
        context.Session.SetString("name", "Tom");
        await context.Response.WriteAsync("Hello World!");
    }
});
 
app.Run();
```

[[AspNetCore/üü°Base|üü°Base]]
