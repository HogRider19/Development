Репликация представляет собой механизм, под которым понимается копирование данных из одного источника на другой и наоборот. При репликации изменения, сделанные в одной копии объекта, могут быть распространены в другие копии.

Сейчас трудно себе представить инсталляцию любой серьезной базы данных в виде единственного инстанса. Если мы говорим о сетевом многопользовательском режиме работы, то здесь использование только одной инсталляции это очень плохая идея.

Основной проблемой единственной инсталляции естественно является надежность. В случае падения сервера нам потребуется некоторое, возможно значительное, время на восстановление. Так восстановление терабайтный базы может занять несколько часов.

Кроме надежности, второй существенной проблемой единственной инсталляции является производительность. Системе нужно горизонтальное масштабирование.

Таким образом, для полноценного функционирования серьезной базы данных нам необходимо делать реплики. Вторую базу можно использовать случае выхода из строя основной. Долгие операции можно перенести на реплику, чтобы разгрузить  мастер.

---

Для начала нужно понимать, что такое журналом предзаписи транзакций WAL. Во избежание нарушений целостности в структуре баз данных, система сначала записывает эти изменения в файлы журнала WAL и только потом в базу.

Журналы WAL нужны для того, чтобы в случае сбоя сервера можно было восстановить незафиксированные данные. Также он используется и для репликации данных.

Репликация на серверах базы данных бывает двух видов: `физическая` и `логическая`. Каждая из них имеет достоинства и недостатки в зависимости от ситуации.

**==Физическая==**. При физической репликации у нас на сервер реплики передается поток WAL записей. Одним из основных достоинств физической репликации является ее простота использования и конфигурации, так как используется простое побайтовое копирование. Также из-за своей простоты, она потребляет меньше ресурсов.

Но у физической репликации есть и свои недостатки. Для ее реализации требуются одинаковые версии системы управления базой данных и операционной системы.

Также должны быть идентичны аппаратные компоненты, такие как архитектура процессора. Возможна репликация только всего кластера, нельзя создать никакую отдельную таблицу, даже временную. Полная идентичность основному серверу.

**==Логическая==**. Логическая репликация работает по принципу подписки. Мастер сервер выступает в роли поставщика, который публикует изменения, происходящие в базе, а серверы, выступающие в роли подписчиков получают и применяют эти изменения.

На программном уровне логические репликации используют репликационные идентификаторы как правило, это первичный ключ. Снимок данных с таблицы на основном инстансе публикуется и передается подписчику мастер сервера.

Логическая репликация  имеет ряд преимуществ перед физической. Это независимость от используемых на серверах форматов хранения данных. То есть, мастер и реплика могут иметь различные представления данных на диске, разные ОС и архитектуры.

Оба сервера участника репликации могут выступать для разных объектов, как в роли поставщика, так и в роли подписчика. Таким образом мы можем использовать двусторонний обмен, то есть создавать реплика таблицы с разных серверов.

Также возможность выборочной репликации отдельных объектов кластера. В результате мы можем снизить нагрузку на сеть, так как объем данных меньше.